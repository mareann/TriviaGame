<!DOCTYPE html>

<html lang="en-us">

  <head>

    <meta charset="UTF-8">
    <title>Trivia Game</title>
    <link rel="stylesheet" href="assets/css/style.css">
<!--    <link rel="stylesheet"  type="text/javascript" href="assets/javascript/app.js">
    jQuery -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  </head>

  <body>

    <div id="wrapper">
      <h1>TRIVIA TIME</h1>

   <!--   <div id="name"></div>  -->  
      <div id="time-left"></div>
      <div id="message"></div>

      <div id="startSection">
        <button id="start">START</button>
      </div>

      <div id="questionSection"></div>
      <div id="answerSection" class="vertical-menu">  
        <button id="answerA"></button>
        <button id="answerB"></button>   
        <button id="answerC"></button>
        <button id="answerD"></button>     
      </div>  
    </div> <!-- end wrapper -->

    <script>
      var Questions = [ '1 what is favorite color?',
                        "2 what is favorite food?",
                        "3 what is favorite soda?" ];
      var Answers   = [ "A  blue", "B  green", "C  yellow", "D  purple",
                        "A fries","B chocolate","C ice cream","D donuts",
                        "A pepsi","B ginger ale","C coke","D 7up"];
      var selectedAnswer = "none";
      var correctAnswer = ['A','B','C'];
      var answerChosen = false;
      var count = 20;
      var questionNumber = 0;
      var maxQuestions = 3;
      var wrongCount = 0;
      var correctCount = 0;
      var t1 = 0, t1 = 0, t3 = 0;

      hideAnswerButtons();
// *********************************************************
      function displayCounts() {
        console.log("correctCount "+correctCount);
        console.log("wrongCount "+wrongCount);
        console.log("number of questions "+maxQuestions);
      }
// **********************************************************
      function hideAnswerButtons() {
        $("#answerSection").attr("class","hide");
        console.log("hideAnswerButtons");
      }
// *********************************************************
      function showAnswerButtons() {
        $("#answerSection").attr("class","show"); 
        $("#answerA").removeClass("selected");
        $("#answerB").removeClass("selected");
        $("#answerC").removeClass("selected");
        $("#answerD").removeClass("selected");
        answerChosen = false;
        setTimeout(countSeconds,1000);
        console.log("showAnswerButtons");      
      } // end showAnswerButtons
// *********************************************************
      //var userName = prompt("What's your name?");
      //$("#name").text("Hi " + userName);
      var letsPlay = false;
// *********************************************************      
      function displayFirstMessages() {
      $("#time-left").text("20 seconds per question");
      $("#message").text("PRESS START TO BEGIN TRIVIA GAME");
      $("#questionSection").text("**** TRIVIA QUESTIONS ****");
      }
// *********************************************************
      displayFirstMessages();
      $("#start").click( function() { 

        $("#time-left").text(count +" seconds left");
        letsPlay=true; 
        console.log("START letsPlay " + letsPlay);
        if  ( letsPlay ) {
          $("#message").text("SELECT YOUR ANSWER BELOW");
          displayTimeLeft();
          letsPlay = playGame();
          console.log("playGame returns letsPlay "+letsPlay);
        }

        $("#start").attr("disabled","true");
        $("#start").attr("class","disabled");

      });
// *********************************************************
      console.log("letsPlay before " + letsPlay);

      function displayTimeLeft() {
      
        console.log( "displayTimeLeft letsPlay " + letsPlay);
        console.log( "displayTimeLeft question "+questionNumber+" count "+count);

        // display question
        if ( !questionNumber )
        {
           t3 = setTimeout(displayQuestion,10);
           t2 = setTimeout(countSeconds,1000);
           console.log("dtl countSeconds 1cs dq0");
        }
        else
        {
           console.log("dtl t2 t3 clearTimeout");
           clearTimeout(t2);
           clearTimeout(t3);
           t2 = setTimeout(countSeconds,1000);
           t3 = setTimeout(displayQuestion,1000);
           //setTimeout(countSeconds,1000*7);
           console.log("dtl countSeconds cs1 dq1");          
        }
//        setTimeout(timeUp,1000*20);
        //setTimeout(countSeconds,1000);
      //  setTimeout(tenSeconds,1000*10);
      //  setTimeout(fiveSeconds,1000*5); //dont need () inside setTimeout

      }
// *********************************************************
      function countSeconds() {
        // if time left
         // console.log("1countSeconds count is " + count);        
        if ( count ) {
          count--;
          $("#time-left").text(count + " seconds left"); 
          console.log("2 countSeconds count is " + count+ " answerChosen "+answerChosen);
          if ( !answerChosen )
          {
            console.log("cs if no answer call cs again");
            t2 = setTimeout(countSeconds,1000);
          }
          else
          {
            console.log("cs clearTimeout t3");
            clearTimeout(t3);
          }
        }
        else
        {
          if ( !answerChosen ) {
            timeUp();
            console.log("cs times up count " + count);
          }
          else
          {
            //displayTimeLeft();
            $("#time-left").text(count);
            console.log("cs count "+count+" update time-left answerChosen "+answerChosen);
          }
        }
      } // end countSeconds
// *********************************************************
      function displayQuestion() {

       console.log("displayQuestion " + questionNumber);
       $("#message").text("Question "+questionNumber);

       $("#questionSection").text(Questions[questionNumber]);
       showAnswerButtons();

       $("#answerA").text(Answers[0+(4*questionNumber)]);
       $("#answerB").text(Answers[1+(4*questionNumber)]);
       $("#answerC").text(Answers[2+(4*questionNumber)]);
       $("#answerD").text(Answers[3+(4*questionNumber)]);
       count=20;
       //setTimeout(displayTimeLeft,10);
       answerChosen = false;
        //}
        /* else
        {
          Questions.pop();
          Questions.push("new question");
          $("#questionSection").text(Questions[0]);
          console.log("new question "+Questions);
        }*/

      } // end displayQuestion
// *********************************************************
      function playGame() {

       $("#answerA").click(function() {
          if ( answerChosen == false ){
            selectedAnswer = "A";
            console.log("playGame " + "A selected " + selectedAnswer);
            answerChosen = true;
            $("#message").text("You selected A");
            $("#answerA").attr("selected",true);
            $("#answerA").attr("class","selected");
            if ( selectedAnswer === correctAnswer[questionNumber] )
              {
                $("#message").text("YOU ARE CORRECT!");
                correctCount++;
              }
            else
            {
              $("#message").text("Oh no...");
              wrongCount++;
            }
            count = 0;
            questionNumber++;
            if ( questionNumber < maxQuestions )
            {
              console.log("A dtl 5 questionNumber ",questionNumber," maxQuestions " + maxQuestions);
              //setTimeout(displayQuestion,1000*7);
              t1 = setTimeout(displayTimeLeft,1000*5);
            }
            else
            {
              //console.log("A clearTimeout");
             // clearTimeout(t1);
            }
            console.log("a  letsPlay "+letsPlay);
            
          } // end answerChosen == false
       });

       $("#answerB").click(function() {
          if ( answerChosen == false ) {
            selectedAnswer = "B";
            answerChosen = true;
            $("#message").text("You selected B");
            $("#answerB").attr("class","selected");
            console.log("playGame " + "B selected " + selectedAnswer);
            if ( selectedAnswer === correctAnswer[questionNumber] )
              {
                $("#message").text("YOU ARE CORRECT!");
                correctCount++;
              }
            else
            {
              $("#message").text("Oh no...");
              wrongCount++;
            }
            count = 0;
            questionNumber++;
            if ( questionNumber < maxQuestions )
            {
              console.log("questionNumber ",questionNumber," maxQuestions " + maxQuestions);
              setTimeout(displayQuestion,1000*7);
             // setTimeout(displayTimeLeft,1000*7);
            }

          }
       });


       $("#answerC").click(function() {
          if ( answerChosen == false ) {
            selectedAnswer = "C";
            answerChosen = true;
            $("#message").text("You selected C");
            $("#answerC").attr("selected",true);
            $("#answerC").attr("class","selected");
            console.log("playGame " + "C selected " + selectedAnswer);
            if ( selectedAnswer === correctAnswer[questionNumber] )
              {
                $("#message").text("YOU ARE CORRECT!");
                correctCount++;
              }
            else
            {
              $("#message").text("Oh no...");
              wrongCount++;
            }
            count = 0;
            questionNumber++;
            if ( questionNumber < maxQuestions )
            {
              console.log("questionNumber ",questionNumber," maxQuestions " + maxQuestions);
              setTimeout(displayQuestion,1000*7);
              //setTimeout(displayTimeLeft,1000*7);
            }

          }
       });


       $("#answerD").click(function() {
          if ( answerChosen == false ) {
            selectedAnswer = "D";
            answerChosen = true;
            $("#message").text("You selected D");
            $("#answerD").attr("selected",true);
            $("#answerD").attr("class","selected");
            console.log("playGame " + "D selected " + selectedAnswer);
            if ( selectedAnswer === correctAnswer[questionNumber] )
              {
                $("#message").text("YOU ARE CORRECT!");
                correctCount++;
              }
            else
            {
              $("#message").text("Oh no...");
              wrongCount++;
            }
            count = 0;
            questionNumber++;
            if ( questionNumber < maxQuestions )
            {
              console.log("questionNumber ",questionNumber," maxQuestions " + maxQuestions);
              t1 = setTimeout(displayQuestion,1000*7);
             // setTimeout(displayTimeLeft,1000*7);
            }
            else
              clearTimeout(t1);
           // else
    
           
          }
       });
          displayCounts();
       console.log("playGame " + "answer selected " + selectedAnswer);

       return false;

      } // end playGame

/*
      function fiveSeconds() {
        //var temp = "";
        $("#time-left").text("10 seconds left"); 
        console.log("10 seconds left -- 5 sec");
      }


      function tenSeconds() {
        $("#time-left").text("5 seconds left");
        console.log("5 sec left ten seconds passed ");
        //$("#answer").text(Answers[0]);
        // in the element with an id of time-left add an h2 saying About 5 Seconds Left!
        // console log 5 seconds left

      }
*/

      function timeUp() {
        $("#time-left").text("times up");
       // letsPlay = false;
        selectedAnswer = 'N';
     //test   answerChosen = true;
            //$("#message").text("You selected C");
            //$("#answerC").attr("selected",true);
            //$("#answerC").attr("class","selected");
            console.log("timeUp " + "selected " + selectedAnswer);
            $("#message").text("Oh no... correct Answer is "+correctAnswer[questionNumber]);
            //count = 0;
            questionNumber++;
            if ( questionNumber < maxQuestions )
            {
              console.log("timeUp question ",questionNumber," maxQuestions " + maxQuestions);
              //test setTimeout(displayQuestion,1000*7);
              setTimeout(displayTimeLeft,1000);
            }

                
        console.log("timeUp letsPlay "+letsPlay);
        // in the element with an id of time-left add an h2 saying Time's Up!
        // console log done

        // The following line will play the audio file we linked to above.
        //audio.play();

      }

    </script>

  </body>

</html>

