<!DOCTYPE html>

<html lang="en-us">

  <head>

    <meta charset="UTF-8">
    <title>Trivia Game</title>
    <link rel="stylesheet" href="assets/css/style.css">
<!--    <link rel="stylesheet"  type="text/javascript" href="assets/javascript/app.js">
    jQuery -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  </head>

  <body>

    <div id="wrapper">
      <h1>TRIVIA TIME</h1>

      <div id="name"></div>    
      <div id="time-left"></div>
      <div id="message"></div>

      <div id="startSection">
        <button id="start">START</button>
      </div>

      <div id="questionSection"></div>
      <div id="answerSection" class="vertical-menu">  
        <button id="answerA"></button>
        <button id="answerB"></button>   
        <button id="answerC"></button>
        <button id="answerD"></button>     
      </div>  
    </div> <!-- end wrapper -->

    <script>
      var Questions = [ '1 what is favorite color?',
                        "2 what is favorite food?",
                        "3 what is favorite soda?" ];
      var Answers   = [ "A  blue", "B  green", "C  yellow", "D  purple",
                        "A fries","B chocolate","C ice cream","D donuts",
                        "A pepsi","B ginger ale","C coke","D 7up"];
      var selectedAnswer = "none";
      var correctAnswer = "D";
      var answerChosen = false;
      var count = 20;
      var questionNumber = 0;
      var maxQuestions = 3;

      hideAnswerButtons();

      function hideAnswerButtons() {
        $("#answerSection").attr("class","hide");
        console.log("hideAnswerButtons");
      }

      function showAnswerButtons() {
        $("#answerSection").attr("class","show"); 
        $("#answerA").removeClass("selected");
        $("#answerB").removeClass("selected");
        $("#answerC").removeClass("selected");
        $("#answerD").removeClass("selected");
        console.log("showAnswerButtons");      
      } // end showAnswerButtons

      var userName = prompt("What's your name?");
      $("#name").text("Hi " + userName);
      var letsPlay = false;

      $("#time-left").text("20 seconds per question");
      $("#message").text("PRESS START TO BEGIN TRIVIA GAME");
      $("#questionSection").text("**** TRIVIA QUESTIONS ****");
      $("#start").click( function() { 

        $("#time-left").text(count +" seconds left");
        letsPlay=true; 
        console.log("START letsPlay " + letsPlay);
        if  ( letsPlay ) {
          $("#message").text("SELECT YOUR ANSWER BELOW");
          displayTimeLeft();
          letsPlay = playGame();
        }

        $("#start").attr("disabled","true");
        $("#start").attr("class","disabled");

      });

      console.log("letsPlay before " + letsPlay);

      function displayTimeLeft () {
      
        console.log( "letsPlay " + letsPlay);

        // display question
        setTimeout(displayQuestion,10);
//        setTimeout(timeUp,1000*20);
        setTimeout(countSeconds,1000);
      //  setTimeout(tenSeconds,1000*10);
      //  setTimeout(fiveSeconds,1000*5); //dont need () inside setTimeout

      }

      function countSeconds() {
        if ( count ) {
          count--;
          $("#time-left").text(count + " seconds left"); 
          console.log("count is " + count);
          setTimeout(countSeconds,1000);
        }
        else
        {
          if ( !answerChosen ) {
            timeUp();
            console.log("times up count " + count);
          }
          else
          {
            $("#time-left").text(count);
            console.log("count seconds answerChosen "+answerChosen);
          }
        }
      } // end countSeconds

      function displayQuestion() {

       console.log("displayQuestion " + questionNumber);

       // if ( !questionNumber ) {
       $("#questionSection").text(Questions[questionNumber]);
       showAnswerButtons();

       $("#answerA").text(Answers[0+(4*questionNumber)]);
       $("#answerB").text(Answers[1+(4*questionNumber)]);
       $("#answerC").text(Answers[2+(4*questionNumber)]);
       $("#answerD").text(Answers[3+(4*questionNumber)]);
       count=20;
       answerChosen = false;
        //}
        /* else
        {
          Questions.pop();
          Questions.push("new question");
          $("#questionSection").text(Questions[0]);
          console.log("new question "+Questions);
        }*/

      } // end displayQuestion

      function playGame() {

       $("#answerA").click(function() {
          if ( answerChosen == false ){
            selectedAnswer = "A";
            console.log("playGame " + "A selected " + selectedAnswer);
            answerChosen = true;
            $("#message").text("You selected A");
            $("#answerA").attr("selected",true);
            $("#answerA").attr("class","selected");
            if ( selectedAnswer === correctAnswer )
              {
                $("#message").text("YOU ARE CORRECT!");
              }
            else
              $("#message").text("Oh no...");
            count = 0;
            questionNumber++;
            if ( questionNumber < maxQuestions )
            {
              console.log("questionNumber ",questionNumber," maxQuestions " + maxQuestions);
              setTimeout(displayQuestion(),1000*3);
            }
            //answerChosen = false;
          } // end answerChosen == false
       });

       $("#answerB").click(function() {
          if ( answerChosen == false ) {
            selectedAnswer = "B";
            answerChosen = true;
            $("#message").text("You selected B");
            $("#answerB").attr("class","selected");
            console.log("playGame " + "B selected " + selectedAnswer);
            if ( selectedAnswer === correctAnswer )
              {
                $("#message").text("YOU ARE CORRECT!");
              }
            else
              $("#message").text("Oh no...");
            count = 0;
            questionNumber++;
            if ( questionNumber < maxQuestions )
            {
              console.log("questionNumber ",questionNumber," maxQuestions " + maxQuestions);
              setTimeout(displayQuestion(),1000*3);
            }

          }
       });


       $("#answerC").click(function() {
          if ( answerChosen == false ) {
            selectedAnswer = "C";
            answerChosen = true;
            $("#message").text("You selected C");
            $("#answerC").attr("selected",true);
            $("#answerC").attr("class","selected");
            console.log("playGame " + "C selected " + selectedAnswer);
            if ( selectedAnswer === correctAnswer )
              {
                $("#message").text("YOU ARE CORRECT!");
              }
            else
              $("#message").text("Oh no...");
            count = 0;
            questionNumber++;
            if ( questionNumber < maxQuestions )
            {
              console.log("questionNumber ",questionNumber," maxQuestions " + maxQuestions);
              setTimeout(displayQuestion(),1000*3);
            }

          }
       });


       $("#answerD").click(function() {
          if ( answerChosen == false ) {
            selectedAnswer = "D";
            answerChosen = true;
            $("#message").text("You selected D");
            $("#answerD").attr("selected",true);
            $("#answerD").attr("class","selected");
            console.log("playGame " + "D selected " + selectedAnswer);
            if ( selectedAnswer === correctAnswer )
              {
                $("#message").text("YOU ARE CORRECT!");
              }
            else
              $("#message").text("Oh no...");
            count = 0;
            questionNumber++;
            if ( questionNumber < maxQuestions )
            {
              console.log("questionNumber ",questionNumber," maxQuestions " + maxQuestions);
              setTimeout(displayQuestion(),1000*3);
            }

          }
       });

       console.log("playGame " + "answer selected " + selectedAnswer);

       return false;

      } // end playGame

/*
      function fiveSeconds() {
        //var temp = "";
        $("#time-left").text("10 seconds left"); 
        console.log("10 seconds left -- 5 sec");
      }


      function tenSeconds() {
        $("#time-left").text("5 seconds left");
        console.log("5 sec left ten seconds passed ");
        //$("#answer").text(Answers[0]);
        // in the element with an id of time-left add an h2 saying About 5 Seconds Left!
        // console log 5 seconds left

      }
*/

      function timeUp() {
        $("#time-left").text("times up");
        letsPlay = false;
        // in the element with an id of time-left add an h2 saying Time's Up!
        // console log done

        // The following line will play the audio file we linked to above.
        //audio.play();

      }

    </script>

  </body>

</html>

